using System.Collections;
using Models;
using UnityEngine;

namespace DefaultNamespace
{
    public class VulnerabilityScanAbility : Ability
    {
        public GameObject attacker;
        public GameObject target;

        public CharacterBattleController attackerBC;
        public CharacterBattleController targetBC;

        public Vector3 origin;
        public Vector3 destination;
        
        private void Awake()
        {
            initiated = false;
            active = false;
        }

        private void Update()
        {
            if (initiated && active)
            {
                StartCoroutine(VulnerabilityScanMain());
            }
        }

        public override void EndEvent(out bool busy)
        {
            Destroy(this);
            busy = false;
        }

        private IEnumerator VulnerabilityScanMain()
        {
            active = false;

            ScannedEffect scannedEffect  = new ScannedEffect(targetBC);
            
            targetBC.TryAddEffect(scannedEffect, targetBC.characterDataComponent.effects);

            Debug.Log(description);
            
            EndEvent(out battleManager.busy);
            yield return null;
        }
    }
}